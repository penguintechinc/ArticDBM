global
    daemon
    log stdout local0 info
    stats socket /tmp/haproxy.sock mode 666 level admin

defaults
    mode tcp
    timeout connect 5s
    timeout client 30s
    timeout server 30s
    log global
    option tcplog
    balance roundrobin

# MySQL load balancing
frontend mysql_frontend
    bind *:3306
    default_backend mysql_backend

backend mysql_backend
    balance roundrobin
    server proxy1 proxy-dev-1:3306 check
    server proxy2 proxy-dev-2:3306 check

# PostgreSQL load balancing
frontend postgres_frontend
    bind *:5432
    default_backend postgres_backend

backend postgres_backend
    balance roundrobin
    server proxy1 proxy-dev-1:5432 check
    server proxy2 proxy-dev-2:5432 check

# MongoDB load balancing
frontend mongo_frontend
    bind *:27017
    default_backend mongo_backend

backend mongo_backend
    balance roundrobin
    server proxy1 proxy-dev-1:27017 check
    server proxy2 proxy-dev-2:27017 check

# Redis load balancing
frontend redis_frontend
    bind *:6379
    default_backend redis_backend

backend redis_backend
    balance roundrobin
    server proxy1 proxy-dev-1:6379 check
    server proxy2 proxy-dev-2:6379 check

# SQLite load balancing
frontend sqlite_frontend
    bind *:8765
    default_backend sqlite_backend

backend sqlite_backend
    balance roundrobin
    server proxy1 proxy-dev-1:8765 check
    server proxy2 proxy-dev-2:8765 check

# HAProxy statistics
frontend stats
    bind *:9090
    stats enable
    stats uri /stats
    stats refresh 30s
    stats admin if TRUE
